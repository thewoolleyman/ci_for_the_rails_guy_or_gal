====================
Ubuntu 7.04 desktop
Change resolution 1680x1050
Mouse Acceleration and Sensitivity 
Terminal scrollback

===================
Install Ruby:
$ sudo apt-get update
$ sudo apt-get install -y ruby (includes rubygems)
$ sudo apt-get install -y rdoc
$ sudo apt-get install -y libopenssl-ruby
- Recommended to build ruby from source on linux, debian packages it strangely

====================
We will keep everything in the home dir, or "~"
You can put it wherever you want

===================
Install MySql (required by default Rails app):
$ sudo apt-get install -y mysql-server

====================
Install subversion:
$ sudo apt-get install -y subversion

====================
Create Subversion Repo
$ svnadmin create repo

====================
Install Rails
$ gem install rails --include-dependencies

====================
Create a rails project
$ rails mysite

====================
Create databases for rails project
$ mysql -u root
mysql> create database mysite_development;
mysql> create database mysite_test;
mysql> create database mysite_development;
mysql> create database mysite_production;
(prod needed because cruise complained if it was not there)

====================
Hack mysql config to be what Rails wants
$ sudo /etc/init.d/mysql stop
$ sudo nano /etc/mysql/my.cnf
# change /var/run/mysqld/mysqld.sock to /tmp/mysql.sock (no d, 3x)
$ sudo nano /etc/mysql/debian.cnf
# same change (2x)
$ sudo /etc/init.d/mysql start

====================
Create a rails migration and db table
$ ruby script/generate migration CreateUserTable
$ nano db/migrate/001_create_user_table.rb
  def self.up
    create_table "users" do |t|
      t.column "name", :string
    end    
  end

  def self.down
    drop_table "users"
  end
$ rake db:migrate
====================
Remove default index.html and create a page
$ cd mysite
$ rm mysite/public/index.html
$ ruby script/generate scaffold User
$ nano test/functional/users_controller_test.rb
# change "users(:first)" to "users(:one)"

=====================
Test rails site
$ rake  # should pass all tests
$ ruby script/server
$ firefox http://localhost:3000/users
# create a user

=====================
Import site into subversion
$ cd
$ rm -rf mysite/log/*
$ rm -rf mysite/db/schema.rb
$ rm -rf tmp
$ svn import mysite file:///home/ci/repo/mysite -m "import"
$ rm -rf mysite
$ svn co file:///home/ci/repo/mysite mysite

=====================
Set svn:ignores
$ cd mysite
$ export EDITOR=nano
$ svn propedit svn:ignore .
tmp
$ svn propedit svn:ignore log
*
$ svn propedit svn:ignore db
schema.rb
$ svn commit . -m "ignores"
$ svn commit log -m "ignores"
$ svn commit db -m "ignores"

=====================
Download and unzip CruiseControl.rb
$ wget http://rubyforge.org/frs/download.php/19237/cruisecontrolrb-1.1.0.tgz
$ tar -zxvf cruisecontrolrb-1.1.0.tgz
$ mv cruisecontrolrb-1.1.0 cc

=====================
Set up project in cruisecontrol
$ cd cc
$ ./cruise add MySite --url file:///home/ci/repo/mysite
$ ./cruise start

====================
View cruisecontrol web page
$ firefox localhost:3333
# click MySite
# Should be passing

====================
Add cruise task to Rakefile
$ nano Rakefile
# Add cruise task:
task :cruise do
  Rake::Task['test'].invoke
end
$ svn commit Rakefile -m "add cruise task"
# Check cruise webpage, should still be passing

====================
Download and Unzip JsUnit
$ wget http://easynews.dl.sourceforge.net/sourceforge/jsunit/jsunit2.2alpha11.zip
$ unzip jsunit2.2alpha11.zip

====================
Copy jsunit to your app and check in
$ cd mysite/public/javascripts
$ mv /home/ci/jsunit .
$ svn add jsunit
$ svn commit -m "add jsunit"

====================
Create a jsunit test
$ mkdir test-pages
$ nano test-pages/prototype_test.html
<html>
<head>
  <script language="JavaScript" type="text/javascript" src="../jsunit/app/jsUnitCore.js"></script>
  <script language="JavaScript" type="text/javascript" src="../prototype.js"></script>
  <script language="javascript">
    function testPrototypeWordSplit() {
      string = 'one two three';
      assertEquals('one', ($w(string))[0]);
    }
  </script>
</head>
<body></body>
</html>

====================
Run the jsunit test manually and commit
$ cd mysite
$ ruby script/server
$ firefox http://localhost:3000/javascripts/jsunit/testRunner.html
# "Run" http://localhost:3000/javascripts/test-pages/prototype_test.html
$ svn add public/javascripts/test-pages
$ svn commit -m "jsunit test"

====================
Add jsunit to cruise rake task
$ nano Rakefile
task :cruise do
  process = IO.popen("ruby /home/ci/cc/projects/work/script/server")
  sleep 3
  Rake::Task['test'].invoke
  Process.kill(9,process.pid)
end
$ svn commit Rakefile -m "add cruise task"
# Check cruise webpage, should still be passing


====================
Download Selenium
$ wget http://release.openqa.org/selenium-core/0.8.2/selenium-core-0.8.2.zip
$ unzip selenium-core-0.8.2.zip




Use rails homepage for selenium test
Use $w from prototype.js for jsunit test


/var/run/mysqld/mysqld.sock




NOTES:

* that guy - use table pluralization as an example question
* OCD - but seriously, if you do have OCD, you will make a good CI g[uy|al]
